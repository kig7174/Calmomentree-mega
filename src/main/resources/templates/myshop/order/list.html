<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <th:block th:replace="~{fragments/head :: calm-head('주문배송조회')}"></th:block>
    <link rel="stylesheet" th:href="@{/assets/css/myshop.css}" />
</head>

<body>
    <!-- 헤더 영역 -->
    <header id="header">
        <header th:replace="~{/fragments/common :: calm-header}"></header>
    </header>

    <div class="container-box">
        <div th:replace="~{/fragments/common :: calm-search}"></div>
        <div th:replace="~{/fragments/common :: calm-search-bg}"></div>
        <div th:replace="~{/fragments/common :: calm-top-btn}"></div>

        <!-- 사이드바 구역 -->
        <div class="side-bar">
            <div class="board-box">
                <ul class="board-inner">
                    <li><a th:href="@{/myshop}">마이페이지</a></li>
                    <li><a th:href="@{/myshop/order/list}">주문/배송조회</a></li>
                    <li><a href="" style="text-decoration: line-through;">쿠폰/적립금</a></li>
                    <li><a th:href=@{/myshop/board_list}>게시글관리</a></li>
                    <li><a th:href="@{/member/modify}">회원정보수정</a></li>
                </ul>
            </div>
        </div>
        <!-- 메인 영역 -->
        <div class="container">
            <div class="myshop-area">
                <div class="myshop-title">
                    <p class="title">Order List</p>
                </div>
                <div class="myshop-tab">
                    <ul class="menuOrder">
                        <!-- <li class="menu-list"><a href="">주문내역조회</a></li>
              <li class="menu-list cancel"><a href="">취소/반품/교환 내역</a></li> -->
                    </ul>
                </div>
                <div class="order-history-box">
                    <form id="order_list_form" class="state-select">
                        <select name="order_state" id="order-status" class="select-status">
                            <option value="">전체 주문처리상태</option>
                            <option value="결제완료">결제완료</option>
                            <option value="배송준비중">배송준비중</option>
                            <option value="배송중">배송중</option>
                            <option value="배송완료">배송완료</option>
                        </select>
                        <span class="period">
                            <a href="" days="00">오늘</a>
                            <a href="" days="30">1개월</a>
                            <a href="" days="90">3개월</a>
                            <a href="" days="180">6개월</a>
                        </span>
                        <div class="date">
                            <span class="date-picker">
                                <input type="date" id="start-date" name="start_date" class="start-date" />

                                -
                                <input type="date" id="end-date" name="end_date" class="end-date" />

                                <button type="submit" class="btn-submit">찾기</button>
                            </span>
                        </div>
                    </form>

                    <div class="order-list">
                        <div class="order">
                            <div class="order-num">
                                <span>15</span>
                            </div>
                            <div class="thumnail">
                                <a href=""><img src="https://via.placeholder.com/83" alt="" width="83"
                                        height="83" /></a>
                            </div>
                            <div class="description">
                                <strong class="prd-name">떼르말 세라마이드 헤드 스파 샴푸 500ML</strong>
                                <span class="price">28,000원</span>
                                <span class="qyt">1(개)</span>
                            </div>
                            <div class="prd-status" title="주문처리상태">
                                <span>배송중</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 페이지 번호 -->
                <div class="paging-box">
                    <ul class="pagination">
                        <li><a class="left">&laquo;</a></li>
                        <li><a class="active">1</a></li>
                        <li><a>2</a></li>
                        <li><a class="right">&raquo;</a></li>
                    </ul>
                </div>

            </div>
        </div>
    </div>

    <footer th:replace="~{/fragments/common :: calm-footer}"></footer>

    <th:block th:replace="~{/fragments/script}"></th:block>
    <script>
        document.querySelector("#order_list_form").addEventListener("submit", async (e) => {
            e.preventDefault();

            const form = new FormData(e.currentTarget);

            let data = null;

            data = await axiosHelper.get("[[@{/api/myshop/order/list}]]", form);

            if (data) {
                data.orders.forEach((v, i) => {
                    const { a = v.rownum, b = v.orderState, c = v.imgUrl, d = v.totalPrice, e = v.totalQuantity, f = v.orderItem } = v;

                    const list = document.querySelector(".order-list");

                    const item1 = document.createElement("div");
                    item1.classList.add("order");
                    list.appendChild(item1);

                    const div1 = document.createElement("div");
                    div1.classList.add("order-num");
                    item1.appendChild(div1);

                    const span1 = document.createElement("span");
                    span1.innerHTML = a;
                    div1.appendChild(span1);

                    const div2 = document.createElement("div");
                    div2.classList.add("thumnail");
                    item1.appendChild(div2);
                    
                    const img1 = document.createElement("img");
                    img1.src = c;
                    div2.appendChild(img1);

                    const div3 = document.createElement("div");
                    div3.classList.add("description");
                    item1.appendChild(div3);

                    const strong = document.createElement("strong");
                    strong.innerHTML = f + "외";
                    div3.appendChild(strong);

                    const span2 = document.querySelector("span");
                    span2.innerHTML = d.toLocaleString() + " 원";
                    div3.appendChild(span2);

                    const span3 = document.querySelector("span");
                    span3.innerHTML = e + "(개)";
                    div3.appendChild(span3);

                    const div4 = document.createElement("div");
                    div4.classList.add("prd-status");
                    item1.appendChild(div4);

                    const span4 = document.createElement("span");
                    span4.innerHTML = b;
                    div4.appendChild(span4);
                });
            }
        });
    </script>
</body>

</html>